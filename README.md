# Мониторинг Docker-контейнеров с помощью Grafana и Prometheus

Цель: развернуть полноценный стек мониторинга Docker-контейнеров, включающий тестовое приложение, систему сбора метрик и визуализацию нагрузки в реальном времени.

## Ход работы
## Этап 1: Подготовка файлов  и запуск конфигурации
Создали файлы и запустили контейнер.
<img width="974" height="326" alt="image" src="https://github.com/user-attachments/assets/0a45dc29-b91e-40d1-96b4-938c3c56aaf3" />

## Этап 2: Проверка cAdvisor

1. Открыли веб-интерфейс cAdvisor в браузере
2. Убедились, что cAdvisor видит все контейнеры

<img width="974" height="777" alt="image" src="https://github.com/user-attachments/assets/79c4fa06-8385-46c6-b290-bf0c803fb91b" />

## Этап 3: Проверка Prometheus

1. Открыли веб-интерфейс Prometheus
2. Перешли в раздел Status → Targets
3. Проверили, что target cAdvisor имеет статус UP
   
<img width="974" height="445" alt="image" src="https://github.com/user-attachments/assets/78ba8808-c2ce-407b-83ec-3c99deb6dd03" />


4. Выполнили тестовый запрос:
    - Перешли на главную страницу Prometheus
    - В поле запроса ввели метрику `container_cpu_usage_seconds_total`
    - Нажали Execute и убедились, что данные выводятся
<img width="974" height="772" alt="image" src="https://github.com/user-attachments/assets/1834d78b-ca4d-4f87-97e8-e8003b3ead6a" />
        
## Этап 5: Подключение Grafana к Prometheus

1. Открыли веб-интерфейс Grafana
2. Добавили новый Data Source (источник данных):
  
<img width="974" height="664" alt="image" src="https://github.com/user-attachments/assets/8ece5e73-99e4-41f3-8113-d808b7807d92" />

## Этап 6: Создание простого дашборда для тестирования

1. Создали новый Dashboard
2. Использовали простой PromQL запрос для отображения метрики контейнера
3. Установили временной диапазон на "Last 5 minutes"
<img width="974" height="638" alt="image" src="https://github.com/user-attachments/assets/a2e73ab0-38fa-4160-967d-85038d86540d" />

## Этап 7: Создание нагрузки на контейнер

1. Выполним команду для генерации нагрузки на контейнер webapp
2. Наблюдаем в реальном времени, как метрики изменяются на дашборде Grafana
3. Остановили нагрузку
4. Проанализировали, как быстро метрики вернулись к норме
<img width="729" height="56" alt="image" src="https://github.com/user-attachments/assets/f44190d1-1b87-424d-b86f-6c5b9f84599d" />

Метрики вернулись к норме в течении 7 минут.

## Этап 8: Анализ и отчёт
1. Создайте скриншоты дашборда с метриками во время нормальной работы
2. Создайте скриншоты дашборда во время нагрузки
3. Опишите наблюдаемые изменения в метриках

<img width="724" height="459" alt="image" src="https://github.com/user-attachments/assets/876f1361-a9d6-4973-86e5-a43f48c2c6e4" />


<img width="741" height="460" alt="image" src="https://github.com/user-attachments/assets/4781cb25-73da-4249-afc7-c9e6e711ad55" />


В нормальном состоянии контейнер  не нагружал CPU. График оставался идеально ровным, без колебаний.
  После запуска нагрузки значение CPU заметно увеличилось. Нагрузка на графике значительно увеличилась, что указывает на активную обработку большого количества входящих запросов. Нагрузка увеличивалсь постепенно, после дошла до некого пика нагрузки по всем ядрам, и в последвтии они оставались загружены на одном уровне до окончания нагрузки.

  В течение периода нагрузки график был стабильным колебания отсутствовали, что является нормальным для веб-приложения, обслуживающего множество коротких HTTP-запросов. Значение CPU оставалось на высоком уровне большую часть времени теста

  После прекращения нагрузки метрика вернулась к исходному уровню — график стал ровным. Это подтверждает, что контейнер корректно освобождает ресурсы и возвращается к нормальной работе после снятия нагрузки.
---
## Вывод 

  В ходе работы были изучены системы мониторинга Docker-контейнеров с использованием cAdvisor, Prometheus и Grafana. Все необходимые сервисы были успешно запущены и настроены, после чего были визуализированы ключевые метрики работы контейнера. Проведённый нагрузочный тест показал корректную реакцию системы: метрики CPU, значительно изменялись во время нагрузки и возвращались к исходным значениям после её завершения. Это подтверждает правильность настройки мониторинга и способность используемых инструментов эффективно отслеживать состояние контейнеров в реальном времени.

